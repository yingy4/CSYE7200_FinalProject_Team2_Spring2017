{"paragraphs":[{"text":"z.angularUnbind(\"stmntData\")\nz.angularUnbind(\"cityNames\")","user":"anonymous","dateUpdated":"2017-04-26T15:20:24-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1493234337208_-627297777","id":"20170426-151857_1404870549","dateCreated":"2017-04-26T15:18:57-0400","dateStarted":"2017-04-26T15:20:24-0400","dateFinished":"2017-04-26T15:20:25-0400","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5724"},{"text":"%angular\n<!--Zeppelin doesn't support binding variables from scala code and access it from JS,\nThis is a work around where we first bind variables we need in JS and watch them, then \nwe bind them in scala code-->\n\n<div id=\"dummy\" vars=\"stmntData,cityNames\"></div>\n\n<script type=\"text/javascript\">\n\n//Given an element in the note & list of values to fetch from Spark\n//window.angularVars.myVal will be current value of backend Spark val of same name\n\nfunction hoist(element){\n    var varNames = element.attr('vars').split(',');\n        window.angularVars = {};\n        var scope = angular.element(element.parent('.ng-scope')).scope().compiledScope;\n        $.each(varNames, function(i, v){\n            window[v+'-watcher'] = scope.$watch(v, function(newVal, oldVal){\n            window.angularVars[v] = newVal;\n            });\n        });\n    }\n    \nhoist($('#dummy'));\n</script>","user":"anonymous","dateUpdated":"2017-04-26T15:20:26-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<!--Zeppelin doesn't support binding variables from scala code and access it from JS,\nThis is a work around where we first bind variables we need in JS and watch them, then \nwe bind them in scala code-->\n\n<div id=\"dummy\" vars=\"stmntData,cityNames\"></div>\n\n<script type=\"text/javascript\">\n\n//Given an element in the note & list of values to fetch from Spark\n//window.angularVars.myVal will be current value of backend Spark val of same name\n\nfunction hoist(element){\n    var varNames = element.attr('vars').split(',');\n        window.angularVars = {};\n        var scope = angular.element(element.parent('.ng-scope')).scope().compiledScope;\n        $.each(varNames, function(i, v){\n            window[v+'-watcher'] = scope.$watch(v, function(newVal, oldVal){\n            window.angularVars[v] = newVal;\n            });\n        });\n    }\n    \nhoist($('#dummy'));\n</script>"}]},"apps":[],"jobName":"paragraph_1493234358887_-1217335668","id":"20170426-151918_151809616","dateCreated":"2017-04-26T15:19:18-0400","dateStarted":"2017-04-26T15:20:26-0400","dateFinished":"2017-04-26T15:20:26-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5725"},{"text":"val file = sc.textFile(\"file:///Users/HuangWei/Desktop/test2.txt\")\n\nval stmntData = file.collect.filter(s => !s.toLowerCase.contains(\"other\")).map(s => s.split(\",\")).map(strArr => strArr.map(s => s.replaceAll(\"(?!^)\\\\+|[^-\\\\d.]+\", \"\")).filter(s => s != \"\"))\n\nval cityNames = file.collect.map(s => s.split(\",\")).map(strArr => strArr(0)).map(s => s.replaceAll(\"[^a-zA-Z0-9]\", \"\")).filter(s => !s.toLowerCase.contains(\"other\"))\n\nz.angularBind(\"stmntData\", stmntData)\nz.angularBind(\"cityNames\", cityNames)","user":"anonymous","dateUpdated":"2017-04-26T15:20:28-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nfile: org.apache.spark.rdd.RDD[String] = file:///Users/HuangWei/Desktop/test2.txt MapPartitionsRDD[457] at textFile at <console>:32\n\nstmntData: Array[Array[String]] = Array(Array(40.730610, -73.935242, 296, 1.614864864864865), Array(34.052235, -118.243683, 202, 1.7772277227722773), Array(51.515419, -0.141099, 188, 1.5212765957446808), Array(43.653908, -79.384293, 89, 1.7415730337078652), Array(25.761681, -80.191788, 67, 1.537313432835821), Array(47.608013, -122.335167, 67, 1.5223880597014925), Array(29.761993, -95.366302, 54, 1.7962962962962963), Array(-33.865143, 151.209900, 19, 1.736842105263158), Array(19.073212, 72.854195, 6, 1.3333333333333333))\n\ncityNames: Array[String] = Array(NewYorkCity, LosAngeles, London, Toronto, Miami, Seattle, Houston, Sydney, Mumbai)\n"}]},"apps":[],"jobName":"paragraph_1493234371744_-629023952","id":"20170426-151931_149383765","dateCreated":"2017-04-26T15:19:31-0400","dateStarted":"2017-04-26T15:20:28-0400","dateFinished":"2017-04-26T15:20:29-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5726"},{"text":"%angular\n\n<script type=\"text/javascript\">\n\nvar stmntData = window.angularVars.stmntData;\nvar cityNames = window.angularVars.cityNames;\n\n<!--alert(stmntData[0][0] + \", \" + stmntData[0][1] + \", \" + stmntData[0][2] + \", \" + stmntData[0][3]);-->\n\n</script>","user":"anonymous","dateUpdated":"2017-04-26T15:20:31-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<script type=\"text/javascript\">\n\nvar stmntData = window.angularVars.stmntData;\nvar cityNames = window.angularVars.cityNames;\n\n<!--alert(stmntData[0][0] + \", \" + stmntData[0][1] + \", \" + stmntData[0][2] + \", \" + stmntData[0][3]);-->\n\n</script>"}]},"apps":[],"jobName":"paragraph_1493234382417_1049266075","id":"20170426-151942_370382960","dateCreated":"2017-04-26T15:19:42-0400","dateStarted":"2017-04-26T15:20:31-0400","dateFinished":"2017-04-26T15:20:31-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5727"},{"text":"%angular\n<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" />\n<script src=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\"></script>\n<div id=\"map\" style=\"height: 600px; width: 100%\"> </div>\n<script type=\"text/javascript\">\nfunction initMap() {\n    var map = L.map('map').setView([40, -30], 3);\n    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n            maxZoom: 15,\n            minZoom: 3\n        }).addTo(map);\n    var geoMarkers = L.layerGroup().addTo(map);\n    \n    $.each(stmntData, function(i, v){\n                    var lat = v[0];\n                    var long = v[1];\n                    var cnt = v[2];\n                    var stmnt = parseFloat(v[3]);\n                    \n                    var iconSize = (stmnt*stmnt*stmnt*stmnt) * 8;\n                    \n                    var pinIcon = L.icon({\n                                    iconUrl: 'http://www.myiconfinder.com/uploads/iconsets/256-256-56165014858e6dbadaf3ba00d782f125.png',\n                                    iconSize: [iconSize, iconSize],\n                                    });\n                                    \n                    var marker = L.marker([lat, long],{icon: pinIcon} ).bindPopup(cityNames[i] + \", Count: \" + cnt + \", \" + \"Sentiment: \" + stmnt.toFixed(2)).openPopup().addTo(map);\n                });\n    }\n    \nif (window.L) {\n    initMap();\n    } else {\n        console.log('Loading Leaflet library');\n        var sc = document.createElement('script');\n        sc.type = 'text/javascript';\n        sc.src = 'https://unpkg.com/leaflet@1.0.3/dist/leaflet.js';\n        sc.onload = initMap;\n        sc.onerror = function(err) { alert(err); }\n        document.getElementsByTagName('head')[0].appendChild(sc);\n    }\n</script>","user":"anonymous","dateUpdated":"2017-04-26T15:20:33-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" />\n<script src=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\"></script>\n<div id=\"map\" style=\"height: 600px; width: 100%\"> </div>\n<script type=\"text/javascript\">\nfunction initMap() {\n    var map = L.map('map').setView([40, -30], 3);\n    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n            maxZoom: 15,\n            minZoom: 3\n        }).addTo(map);\n    var geoMarkers = L.layerGroup().addTo(map);\n    \n    $.each(stmntData, function(i, v){\n                    var lat = v[0];\n                    var long = v[1];\n                    var cnt = v[2];\n                    var stmnt = parseFloat(v[3]);\n                    \n                    var iconSize = (stmnt*stmnt*stmnt*stmnt) * 8;\n                    \n                    var pinIcon = L.icon({\n                                    iconUrl: 'http://www.myiconfinder.com/uploads/iconsets/256-256-56165014858e6dbadaf3ba00d782f125.png',\n                                    iconSize: [iconSize, iconSize],\n                                    });\n                                    \n                    var marker = L.marker([lat, long],{icon: pinIcon} ).bindPopup(cityNames[i] + \", Count: \" + cnt + \", \" + \"Sentiment: \" + stmnt.toFixed(2)).openPopup().addTo(map);\n                });\n    }\n    \nif (window.L) {\n    initMap();\n    } else {\n        console.log('Loading Leaflet library');\n        var sc = document.createElement('script');\n        sc.type = 'text/javascript';\n        sc.src = 'https://unpkg.com/leaflet@1.0.3/dist/leaflet.js';\n        sc.onload = initMap;\n        sc.onerror = function(err) { alert(err); }\n        document.getElementsByTagName('head')[0].appendChild(sc);\n    }\n</script>"}]},"apps":[],"jobName":"paragraph_1493234392719_-1250762850","id":"20170426-151952_1333939689","dateCreated":"2017-04-26T15:19:52-0400","dateStarted":"2017-04-26T15:20:33-0400","dateFinished":"2017-04-26T15:20:33-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5728"},{"text":"%angular\n","user":"anonymous","dateUpdated":"2017-04-26T15:20:33-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1493234433277_-774566305","id":"20170426-152033_222050235","dateCreated":"2017-04-26T15:20:33-0400","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:5729"}],"name":"7200Final/Mapping","id":"2CF31S26D","angularObjects":{"2CFJ36ME7:shared_process":[],"2CE9PJFGM:shared_process":[],"2CCNM2DM6:shared_process":[],"2CDQXG3KB:shared_process":[],"2CDQGXA55:shared_process":[],"2CFP4DBJV:shared_process":[],"2CEJH4AKM:shared_process":[],"2CESVVEM7:shared_process":[{"name":"txt","object":"test"},{"name":"latittude","object":42.3398},{"name":"cityNames","object":["NewYorkCity","LosAngeles","London","Toronto","Miami","Seattle","Houston","Sydney","Mumbai"],"noteId":"2CF31S26D"},{"name":"stmntData","object":[["40.730610","-73.935242","296","1.614864864864865"],["34.052235","-118.243683","202","1.7772277227722773"],["51.515419","-0.141099","188","1.5212765957446808"],["43.653908","-79.384293","89","1.7415730337078652"],["25.761681","-80.191788","67","1.537313432835821"],["47.608013","-122.335167","67","1.5223880597014925"],["29.761993","-95.366302","54","1.7962962962962963"],["-33.865143","151.209900","19","1.736842105263158"],["19.073212","72.854195","6","1.3333333333333333"]],"noteId":"2CF31S26D"}],"2CDP3N3M1:shared_process":[],"2CFJMSWAF:shared_process":[],"2CDKU9GBG:shared_process":[],"2CF56FVPZ:shared_process":[],"2CD5K62NZ:shared_process":[],"2CCBHEMW2:shared_process":[],"2CCE4SMDU:shared_process":[],"2CFMN9NEB:shared_process":[],"2CCDUTQVT:shared_process":[],"2CEUHNK87:shared_process":[],"2CCWYNHK2:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}